---
title: "plot_assignment"
output: html_notebook
---


Subletting data


```{r}

# Clean the data, change the data type from Char to Date, time, num 
# save the subset to a sparate file for later procesing
library(data.table)
library(sqldf)

# define start date or end date
sdate <- as.Date("01/02/2007",format ="%d/%m/%Y")
edate <- as.Date("02/02/2007",format ="%d/%m/%Y")

numnames = c("Global_active_power","Global_reactive_power","Voltage","Global_intensity","Sub_metering_1","Sub_metering_2","Sub_metering_3")

# read and subset the data with sdata, and edate
df=fread("household_power_consumption.txt",na.strings="?")

# change char to IDate and Itime type for later processing
df<- df[, ("Date") := lapply(.SD, as.Date, format ="%d/%m/%Y"), .SDcols = "Date"]
df<-df[, ("Time") := lapply(.SD, as.ITime), .SDcols = "Time"]

#subsetting data, save the usefule bit
dt <- subset(df, df$Date %between% c(sdate,edate))

#set numnames to be numeric for later works 
dt<- dt[, (numnames) := lapply(.SD, as.numeric), .SDcols = numnames]
dt<-dt[complete.cases(dt),]
# create a smaller text file to work on 
fwrite(dt,"workingData.csv")

```


Plot 1 

```{r}
library(data.table)
# read small Data set
dt <-fread("workingData.csv")

# plotting with hist 
with(dt, hist(Global_active_power, 
              main = "Global Active power",
              col = "red",
              xlab = "Global Active power(kilowatts)"))

# copy to file
dev.copy(png,"plot1.png")
dev.off()

```



Plot 2

```{r}
library(data.table)

# read small Data set
dt <-fread("workingData.csv")

dt[, ("Time") := lapply(.SD, as.ITime), .SDcols = "Time"]

head(dt)

dnt <- as.POSIXct(paste(dt$Date,dt$Time), format = "%Y-%m-%d %H:%M:%S")
dt$DnT <- dnt
# plotting with hist 
with(dt, plot(DnT,Global_active_power,type = "l",
              ylab = "Global Active power(kilowatts)",
              xlab = ""))
head(dt)
# copy to file
#dev.copy(png,"plot1.png")
#dev.off()


```



This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 

```{r}
plot(cars)
```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Ctrl+Shift+K* to preview the HTML file).

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.
